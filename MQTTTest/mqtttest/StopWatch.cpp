//----------------------------------------------------------------------------
//
//  $Workfile: StopWatch.cpp$
//
//  $Revision: X$
//
//  Project:    multiple
//
//                            Copyright (c) 2017
//                                Jim Wright
//                            All Rights Reserved
//
//  Modification History:
//  $Log:
//  $
//
//----------------------------------------------------------------------------
#include <stdio.h>
#include <sys/time.h>
#include "StopWatch.hpp"

//----------------------------------------------------------------------------
//
//  See the header
//
//----------------------------------------------------------------------------
StopWatch::StopWatch() :
  mLastTime(0),
  mWaitTime(1000)
{
}

//----------------------------------------------------------------------------
//
//  See the header
//
//----------------------------------------------------------------------------
StopWatch::StopWatch(int waitTime) :
  mLastTime(0),
  mWaitTime(waitTime)
{
}

//----------------------------------------------------------------------------
//
//  See the header
//
//----------------------------------------------------------------------------
long StopWatch::Now(void)
{
  struct timeval theTime;
  gettimeofday(&theTime,NULL);
  return ((theTime.tv_sec * 1000) + (theTime.tv_usec/1000));
}

//----------------------------------------------------------------------------
//
//  See the header
//
//----------------------------------------------------------------------------
void StopWatch::SetTime(int waitTime)
{
  mWaitTime = waitTime;
}

//----------------------------------------------------------------------------
//
//  See the header
//
//----------------------------------------------------------------------------
bool StopWatch::IsExpired(void)
{
  if((Now() - mLastTime)>mWaitTime)
  {
     return true;
  }
  return false;
}

//----------------------------------------------------------------------------
//
//  See the header
//
//----------------------------------------------------------------------------
void StopWatch::Reset(void)
{
  mLastTime = Now();
}

//----------------------------------------------------------------------------
//
//  See the header
//
//----------------------------------------------------------------------------
long StopWatch::GetTimeLeft()
{
  return mWaitTime - (Now()-mLastTime);
}

